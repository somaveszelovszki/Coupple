car.signup=(function(a){var b={signupButtonClick:function(){var g={couple:{},persons:{person1:{},person2:{}}};g.couple.name=a("#coupleNameField").val();var d=a("#coupleRelationshipBeginningDateField").val();g.couple.relationshipBeginningDate=d?new Date(d).toMySQLDatetimeString():null;g.couple.relationshipBeginningShortDescription=a("#coupleRelationshipBeginningShortDescriptionField").val();var k=a("#relationshipStateSelect");g.couple.relationshipStateId=k[0].options[k.prop("selectedIndex")].value;for(var f=1;f<=2;f++){var e=a("#person"+f+"Form");g.persons["person"+f].firstName=e.find("#person"+f+"FirstNameField").val();g.persons["person"+f].surname=e.find("#person"+f+"SurnameField").val();g.persons["person"+f].email=e.find("#person"+f+"EmailField").val();g.persons["person"+f].password=e.find("#person"+f+"PasswordField").val();if(g.persons["person"+f].password!==e.find("#person"+f+"ConfirmPasswordField").val()){console.log("Confirmed password does not match original password");return}g.persons["person"+f].birthday=e.find("#person"+f+"BirthdayField").val();var j=e.find(".genderSelect");for(var c=0;c<j.length;c++){g.persons["person"+f].genderId=undefined;if(j[c].checked){g.persons["person"+f].genderId=j[c].id.replace("person"+f+"gender","");break}}}if(hasEmptyValue(g)){console.log("Incomplete data")}else{var h=new Date().toMySQLDatetimeString();a.post(createURIText("coupple/ajaxRegisterCouple"),{data:g,time:h},function(i){if(i.success){if(i.result&&i.result.length==1){window.location.href=createURIText("coupple/main")}else{console.log("Some error has happened during sign up :(")}}else{console.log(i.message?i.message:"Some error has happened during sign up :(")}},"json")}}};return{initialize:function(){a("#signupButton").click(b.signupButtonClick)}}})(jQuery);$(document).ready(function(){car.signup.initialize()});